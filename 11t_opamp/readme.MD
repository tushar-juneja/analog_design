
# Two-Stage CMOS Operational Amplifier  
### SKY130A | Xschem | NGSpice

---

## ğŸ“Œ Project Summary
This project demonstrates the **design and analysis of a two-stage CMOS operational amplifier** using the **SkyWater 130nm (SKY130A) PDK**.  
The transistor-level schematic is implemented in **Xschem**, and simulations are conducted using **NGSpice**.

The main goal is to study the amplifier's **frequency response, voltage gain, stability, phase margin, and gain margin** while applying Miller compensation for improved stability.

---

## ğŸ› ï¸ Tools & Platform
- **Xschem** â€“ For schematic capture  
- **NGSpice** â€“ For circuit simulation  
- **SkyWater SKY130A PDK** â€“ Process design kit for 130nm CMOS  
- **Linux environment** â€“ Development and simulation

---

## ğŸ§© Circuit Architecture
The design comprises two amplification stages and compensation circuitry to ensure stability.

### ğŸ”¹ First Stage
- NMOS differential pair as the input stage  
- PMOS current mirror as load  
- Provides high differential gain at low frequencies  

### ğŸ”¹ Second Stage
- Common-source amplifier stage  
- Boosts overall voltage gain to target specifications  

### ğŸ”¹ Miller Compensation
- Capacitor connected between the first-stage output and second-stage input  
- Stabilizes the amplifier and ensures adequate phase margin  

### ğŸ”¹ Biasing Network
- Constant current sources provide proper biasing for both stages, ensuring all transistors operate in saturation  

<img width="1897" height="915" alt="Two-Stage Op-Amp Schematic" src="./schematic.png" />

---

## âš™ï¸ Simulation Procedures
The amplifier was tested in NGSpice using the following analyses:

- **DC Operating Point Analysis**  
- **AC Frequency Response Analysis** (Gain and Phase)  
- **Stability Analysis** (Phase Margin and Gain Margin)

### AC Simulation Command
```spice
.ac dec 100 1 1e7
```

---

## ğŸ“ˆ Simulation Observations

### ğŸ”¹ DC Gain
- Low-frequency voltage gain â‰ˆ 38 dB

### ğŸ”¹ Unity Gain Bandwidth (UGB)
- UGB â‰ˆ 1 MHz

### ğŸ”¹ Phase Margin
- Phase at unity gain â‰ˆ 60Â°  
- Phase Margin â‰ˆ 60Â°

### ğŸ”¹ Gain Margin
- Gain at âˆ’180Â° phase â‰ˆ âˆ’10 dB  
- Gain Margin â‰ˆ 10 dB

---

## âœ… Performance Summary

| Parameter            | Observation |
|--------------------- |------------|
| DC Gain              | ~38 dB     |
| Unity Gain Bandwidth | ~1 MHz     |
| Phase Margin         | ~60Â°       |
| Gain Margin          | ~10 dB     |
| Stability            | Stable     |

The amplifier demonstrates **reliable stability** due to Miller compensation.

---

## ğŸ“¸ Simulation Plots

- **Bode Magnitude Plot (Gain vs Frequency)**  
<img width="707" height="533" alt="Gain Plot" src="./waveform.png" />

- **Bode Phase Plot (Phase vs Frequency)**  
<img width="710" height="545" alt="Phase Plot" src="./improved_waveform.png" />

---
